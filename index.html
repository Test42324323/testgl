<!DOCTYPE html>
<html lang="fr">
<head>
  <script>
  let finalCode = "----"; 
  const GAME_KEY = "code1"; // <- change pour chaque jeu

  async function loadCode() {
    try {
      const res = await fetch("./codes.txt", { cache: "no-cache" });
      const text = await res.text();
      const lines = text.split("\n");
      const map = {};
      lines.forEach(line => {
        const [key, value] = line.split("=");
        if (key && value) {
          map[key.trim()] = value.trim();
        }
      });
      if (map[GAME_KEY]) {
        finalCode = map[GAME_KEY];
      }
    } catch (e) {
      console.error("Erreur de chargement du txt :", e);
    }
  }
  loadCode();
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SYST√àME DE S√âCURIT√â - ACC√àS REQUIS</title>
  <style>
    /* ton CSS inchang√© */
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="title glitch">‚ö†Ô∏è SYST√àME DE S√âCURIT√â ‚ö†Ô∏è</div>
      <div class="subtitle">PROTOCOLE DE S√âCURIT√â √Ä TROIS NIVEAUX</div>
    </div>

    <!-- ... ton jeu ... -->

    <div id="successScreen" class="success-screen">
      <div class="title">üîì ACC√àS ACCORD√â üîì</div>
      <!-- ici on met un id -->
      <div id="codeDisplay" class="code-display">----</div>
      <div class="subtitle">Code d'acc√®s r√©cup√©r√© - Mission accomplie</div>
      <div style="margin-top: 30px; font-size: 14px; color: #666;">
        Syst√®me d√©chiffr√© avec succ√®s
      </div>
    </div>

    <div id="failureScreen" class="failure-screen">
      <div class="failure-title glitch">‚ö†Ô∏è √âCHEC DU PIRATAGE ‚ö†Ô∏è</div>
      <div class="failure-subtitle">SYST√àME DE S√âCURIT√â ACTIV√â - ACC√àS REFUS√â</div>
      <button class="restart-btn" onclick="restartGame()">R√âESSAYER</button>
    </div>
  </div>

  <script>
    /* tes variables et fonctions identiques ... */

    function allLevelsCompleted() {
      document.getElementById('successScreen').style.display = 'block';
      // ins√©rer le code r√©cup√©r√©
      document.getElementById("codeDisplay").textContent = finalCode;
      document.body.style.animation = 'pulse 0.5s infinite alternate';
    }

    // reste du code inchang√©...
    window.onload = function() {
      setTimeout(initGame, 1000);
    };
  </script>
</body>
</html>
